<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" />
<title>cluster.pl - MMTSB</title>
<meta name="generator" content="MediaWiki 1.25.1" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/mwiki-mmtsb/opensearch_desc.php" title="MMTSB (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://feig.bch.msu.edu/mwiki-mmtsb/api.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="/mmtsb/cluster.pl" />
<link rel="alternate" type="application/atom+xml" title="MMTSB Atom feed" href="/mwiki-mmtsb/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="http://feig.bch.msu.edu/mwiki-mmtsb/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.mmtsb.styles&amp;only=styles&amp;skin=mmtsb&amp;*" />
<!--[if IE 6]><link rel="stylesheet" href="/mwiki-mmtsb/skins/MMTSB/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/mwiki-mmtsb/skins/MMTSB/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: mmtsbwiki:resourceloader:filter:minify-css:7:186aa9ed34970b96f0dd1fdd2e763115 */</style>
<script src="http://feig.bch.msu.edu/mwiki-mmtsb/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=mmtsb&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"cluster.pl","wgTitle":"cluster.pl","wgCurRevisionId":114349,"wgRevisionId":114349,"wgArticleId":1369,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"cluster.pl","wgRelevantArticleId":1369,"wgIsProbablyEditable":false,"wgRestrictionEdit":["sysop"],"wgRestrictionMove":["sysop"]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: mmtsbwiki:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-cluster_pl skin-mmtsb action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
			        <TABLE CLASS="header" CELLPADDING=4 WIDTH=100%><TR><TD VALIGN=top>
				<a href="http://mmtsb.chem.lsa.umich.edu"><img src="/mwiki-mmtsb/skins/MMTSB/mmtsblogo-blue.gif" alt="MMTSB" /></a>
				</TD>
				<TD>
				<TABLE CELLPADDING=2 CLASS="header">
				<TR><TD CLASS="toolsettitle" WIDTH=100% ALIGN=right>
				  Tool Set Documentation
		    	        </TD></TR>
				<TR><TD CLASS="searcharea" WIDTH=100% ALIGN=right>
						<div id="p-search" class="portlet" role="search">
			<!--<h3><label for="searchInput">Search</label></h3>-->

			<div id="searchBody" class="pBody">
				<form action="/mwiki-mmtsb/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search MMTSB [f]" accesskey="f" id="searchInput" />
<!--					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />-->
				</form>

							</div>
		</div>
					</TD></TR></TABLE>	
				</TD></TR></TABLE>	

				<div id="navarea">
   						<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<!--<h3>Navigation</h3>-->
		<div class='pBody'>
							<ul>
											<li id="n-Main"><a href="/mmtsb/Main_Page">Main</a></li>
											<li id="n-MMTSB-Research-Resource"><a href="http://www.mmtsb.org" rel="nofollow">MMTSB Research Resource</a></li>
											<li id="n-Forum"><a href="http://www.charmm.org/ubbthreads/postlist.php?Cat=0&amp;Board=MMTSB" rel="nofollow">Forum</a></li>
											<li id="n-Workshops"><a href="http://www.mmtsb.org/workshops.html" rel="nofollow">Workshops</a></li>
											<li id="n-Download"><a href="http://www.mmtsb.org/cgi-bin/download?toolset" rel="nofollow">download</a></li>
											<li id="n-Installation"><a href="/mmtsb/Installation">Installation</a></li>
									</ul>
					</div>
		</div>
					</div>
   		                                      <div id="content">
				
				<a id="top"></a>
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">cluster.pl</h1>

				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From MMTSB</div>
					<div id="contentSub"></div>
					<!--					-->
					<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><h2><span class="mw-headline" id="Usage">Usage</span></h2>
<pre>usage:   cluster.pl [options] [files]
options: [-jclust] [-kclust]
         [-maxnum value] [-minsize value] [-maxlevel value]
         [-radius value] [-[no]iterate]
         [-mode rmsd|contact|phi|psi|phipsi|mix]
         [-contmaxdist value] [-mixfactor value]
         [-pdb | -sicho]
         [-selmode ca|cb|cab|heavy|all]
         [-l min:max[=min:max ...]] [-fitxl]
         [-[no]lsqfit]
         [-centroid] [-centout template]
         [-log file]
</pre><A HREF="http://feig.bch.msu.edu/cgi-bin/mmtsb-source?cluster.pl" TARGET=_new>Show source</A>
<p><br />
</p>
<h2><span class="mw-headline" id="Description">Description</span></h2>
<p>This script applies a clustering algorithm to a set
of files. The list of files can be passed either as the last arguments
on the command line or through standard input. The clustering result
is written to standard output.
</p><p>Two clustering methods are available. Hierarchical clustering
that uses automatic stopping criteria is used by default
or if the option <b>-jclust</b> is given.
With this cluster method the ideal number of
clusters is determined automatically up to a maximum number of clusters.
The default maximum is 4 clusters, it may be changed with <b>-maxnum</b>.
For each of these initially identified clusters the clustering procedure is
then reapplied to determine subclusters if the number
of elements in a cluster is larger than a given threshold. This
threshold is set to 400 structures by default and can be changed
with <b>-minsize</b>. The procedure is repeated recursively as long as there
are large enough subclusters or until a maximum recusion level is
reached. The level is set to 999 by default, which means practically
no limit, it can be changed with <b>-maxlevel</b>.
</p><p>An alternative clustering method employs a fixed cluster radius and
is selected with <b>-kclust</b>. Subclusters are not generated in this
case, and the resulting number of clusters cannot be limited with
<b>-maxnum</b>. The fixed cluster radius is given with <b>-radius</b>.
</p><p>Depending on the cluster method different cluster modes that
use different criteria for measuring distances between the
input structures are available. The cluster mode is selected with
<b>-mode</b>. Both cluster methods support clustering based on
cartesian coordinate RMSD between structures. With the hierarchical
clustering algorithm it is also possible to cluster based on similarities
in the contact map (<font color="#508060">contact</font>).
In this case the option <b>-contmaxdist</b> determines the maximum distance
between residues for being counted in the comparison. The default
value is 12.0 A.
</p><p>The fixed radius clustering method supports dihedral based clustering
using RMSD values for phi angles (<font color="#508060">phi</font>), psi angles (<font color="#508060">psi</font>),
or both (<font color="#508060">phipsi</font>). A mixing mode is also supported where the
distance measure is given by the sum of phi and psi RMSD values, divided by 20
and multiplied by a mixing factor, and the cartesian space RMSD multiplied
by 1 minus the mixing factor. This mode is selected with <font color="#508060">mix</font>.
The mixing factor can be set with <b>-mixfactor</b>.
</p><p>In the default mode of operation the input structures are expected
to be in PDB format (option: <b>-pdb</b>). Alternatively, SICHO lattice
chains can be used as input if <b>-sicho</b> is given.
</p><p>For loop/fragment modeling it is possible to restrict the comparison
to a range of residues specified with the <b>-l</b> option. In this case
the fit between different structures before an RMSD value is calculated
may either be done based on the loop/fragment residues (default) or based
on the rest of protein excluding the loop/fragment if <b>-fitxl</b> is
specified.
</p><p>A log file can be requested if the option <b>-log</b> is used.
It is also possible to request output of the centroids of each cluster
with <b>-centroid</b>. The option <b>-centout</b> is used to provide
a template for the centroid file names. The centroids are written in PDB
format if the clustering is based on RMSD comparison. For contact map based
clustering the centroids are RGB maps with the contact map represented
as a bitmap.
</p><p>This tool calls external binaries to carry out the clustering. The environment
variables KCLUST and JCLUST can be used to set the location of the binaries
for K-means and hierarchical clustering, respectively.
</p>
<h2><span class="mw-headline" id="Options">Options</span></h2>
<dl><dt> -help&#160;</dt>
<dd> usage information</dd>
<dt> -jclust&#160;</dt>
<dd> invoke hierarchical clustering algorithm</dd>
<dt> -maxnum value&#160;</dt>
<dd> maximum number of clusters for hierarchical clustering</dd>
<dt> -minsize value&#160;</dt>
<dd> minimum size of cluster to perform second level of hierarchical subclustering</dd>
<dt> -maxlevel value&#160;</dt>
<dd> maximum number of clustering levels for hierarchical clustering</dd>
<dt> -kclust&#160;</dt>
<dd> invoke K-means clustering algorithm</dd>
<dt> -radius value&#160;</dt>
<dd> K-means clustering radius</dd>
<dt> -[no]iterate&#160;</dt>
<dd> go (not) through multiple rounds of K-means clustering</dd>
<dt> -mode rmsd|contact|phi|psi|phipsi|mix&#160;</dt>
<dd> cluster according to RMSD, contact map, dihedrals, or a combination of contact map and RMSD (mix)</dd>
<dt> -contmaxdist value&#160;</dt>
<dd> maximum value for contacts to be considered</dd>
<dt> -mixfactor value&#160;</dt>
<dd> weight of contact map vs. RMSD in mixed mode</dd>
<dt> -pdb&#160;</dt>
<dd> process files as PDB structures</dd>
<dt> -sicho&#160;</dt>
<dd> process files as SICHO models</dd>
<dt> -selmode ca|cb|cab|heavy|all&#160;</dt>
<dd> specify which atoms are used for the calculation of RMSD values</dd>
<dt> -l min&#58;max[=...]&#160;</dt>
<dd> limit RMSD calculation to specified residue range</dd>
<dt> -fitxl&#160;</dt>
<dd> perform least-squares superposition for all residues except residue range given with -l</dd>
<dt> -[no]lsqfit&#160;</dt>
<dd> superimpose structures before calculating RMSD values</dd>
<dt> -centroid&#160;</dt>
<dd> write out centroid structures</dd>
<dt> -centout template&#160;</dt>
<dd> provide template for centroid file names</dd>
<dt> -log file&#160;</dt>
<dd> generate log file</dd></dl>
<h2><span class="mw-headline" id="Examples">Examples</span></h2>
<p><tt><FONT COLOR=#702050>cluster.pl 1vii.sample.*.pdb
</font></tt><br>
performs hierarchical clustering of the input files 
<FONT COLOR=#508060>1vii.sample.*.pdb</FONT> based on mutual RMSD.
<br>
</p>
<pre># cluster file
# automatically generated on: Tue Sep 25 14:08:51 2001
# mode: rmsd, filetype: pdb, lsqfit: 1, selmode: cab
@cluster t has 16 elements, 3 subclusters
1 1vii.sample.1.pdb
2 1vii.sample.10.pdb
3 1vii.sample.11.pdb
4 1vii.sample.12.pdb
5 1vii.sample.13.pdb
6 1vii.sample.14.pdb

...</pre>
<p><br />
<tt><FONT COLOR=#702050>cluster.pl -maxnum 3 -mode contact -contmaxdist 8.0 1vii.sample.*.pdb
</font></tt><br>
performs hierarchical clustering of the input files 
<FONT COLOR=#508060>1vii.sample.*.pdb</FONT> based on differences
in the residue contact maps allowing a maximum of 3 clusters.
Residue separations of more
than 8 A are ignored in the comparison.
<br>
</p>
<pre># cluster file
# automatically generated on: Tue Sep 25 14:09:23 2001
# mode: contact, filetype: pdb, lsqfit: 1, selmode: cab
@cluster t has 16 elements, 2 subclusters
1 1vii.sample.1.pdb
2 1vii.sample.10.pdb
3 1vii.sample.11.pdb
4 1vii.sample.12.pdb
5 1vii.sample.13.pdb
6 1vii.sample.14.pdb

...</pre>
<p><br />
<tt><FONT COLOR=#702050>cluster.pl -maxnum 3 -minsize 5 -l 10:21 -fitxl -log cluster.log 1vii.sample.*.pdb
</font></tt><br>
performs hierarchical clustering of the input files 
<FONT COLOR=#508060>1vii.sample.*.pdb</FONT> based on mutual RMSD
for residues 10 through 21. Before calculating RMSD
values the rest of two protein structures that 
are compared is overlayed with a least squares fit.
At each clustering level
a maximum of three clusters are selected and 
subclusters are idenitified for clusters containing
5 or more structures.
A log file <FONT COLOR=#508060>cluster.log</FONT> is produced.
<br>
</p>
<pre># cluster file
# automatically generated on: Tue Sep 25 14:10:13 2001
# mode: rmsd, filetype: pdb, lsqfit: 1, selmode: cab
@cluster t has 16 elements, 2 subclusters
1 1vii.sample.1.pdb
2 1vii.sample.10.pdb
3 1vii.sample.11.pdb
4 1vii.sample.12.pdb
5 1vii.sample.13.pdb
6 1vii.sample.14.pdb

...</pre>
<p><br />
<tt><FONT COLOR=#702050>cluster.pl -maxnum 3 -minsize 10 -centroid -centout sample 1vii.sample.*.pdb
</font></tt><br>
performs hierarchical clustering of the input files 
<FONT COLOR=#508060>1vii.sample.*.pdb</FONT> based on mutual RMSD.
At each clustering level
a maximum of three clusters are selected and 
subclusters are idenitified for clusters containing
10 or more structures.
In addition the centroids of each cluster are written
out in PDB format to files beginning with <FONT COLOR=#508060>sample</FONT>.
<br>
</p>
<pre># cluster file
# automatically generated on: Mon Jun 18 10:09:08 2001
# mode: rmsd, filetype: pdb, lsqfit: 1, selmode: cab
@cluster t has 16 elements, 3 subclusters
1 1vii.sample.1.pdb
2 1vii.sample.10.pdb
3 1vii.sample.11.pdb
4 1vii.sample.12.pdb
5 1vii.sample.13.pdb
6 1vii.sample.14.pdb

...</pre>
<p><br />
<tt><FONT COLOR=#702050>cluster.pl -kclust -radius 3 1vii.sample.*.pdb
</font></tt><br>
performs fixed radius clustering of the input files 
<FONT COLOR=#508060>1vii.sample.*.pdb</FONT> based on mutual RMSD.
The radius is set to 3 A.
<br>
</p>
<pre># cluster file
# automatically generated on: Tue Sep 25 14:10:58 2001
# mode: rmsd, filetype: pdb, lsqfit: 1, selmode: cab
@cluster t has 16 elements, 8 subclusters
1 1vii.sample.1.pdb
2 1vii.sample.10.pdb
3 1vii.sample.11.pdb
4 1vii.sample.12.pdb
5 1vii.sample.13.pdb
6 1vii.sample.14.pdb

...</pre>
<p><br />
<tt><FONT COLOR=#702050>cluster.pl -kclust -mode phi -radius 30 1vii.sample.*.pdb
</font></tt><br>
performs fixed radius clustering of the input files 
<FONT COLOR=#508060>1vii.sample.*.pdb</FONT> based on phi dihedral RMSD.
The radius is set to 30 degrees.
<br>
</p>
<pre># cluster file
# automatically generated on: Tue Sep 25 14:12:19 2001
# mode: phi, filetype: pdb, lsqfit: 1, selmode: cab
@cluster t has 16 elements, 7 subclusters
1 1vii.sample.1.pdb
2 1vii.sample.10.pdb
3 1vii.sample.11.pdb
4 1vii.sample.12.pdb
5 1vii.sample.13.pdb
6 1vii.sample.14.pdb

...</pre>

<!-- 
NewPP limit report
CPU time usage: 0.054 seconds
Real time usage: 0.479 seconds
Preprocessor visited node count: 47/1000000
Preprocessor generated node count: 170/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 - -total
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://feig.bch.msu.edu/mwiki-mmtsb/index.php?title=cluster.pl&amp;oldid=114349">http://feig.bch.msu.edu/mwiki-mmtsb/index.php?title=cluster.pl&amp;oldid=114349</a>"</div>
					<div id='catlinks' class='catlinks catlinks-allhidden'></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
				</div>
			</div>
		</div>
		
		<div id="editarea">
				<div id="p-cactions" class="portlet" role="navigation">
			<!--<h3>Views</h3>-->

			<div class="pBody">
				<ul>
				<li id="ca-nstab-main" class="selected"><a href="/mmtsb/cluster.pl" title="View the content page [c]" accesskey="c">Documentation</a></li>
				<li id="ca-talk" class="new"><a href="/mwiki-mmtsb/index.php?title=Talk:cluster.pl&amp;action=edit&amp;redlink=1" title="Discussion about the content page [t]" accesskey="t">Comments</a></li>
				<li id="ca-viewsource"><a href="/mwiki-mmtsb/index.php?title=cluster.pl&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
				<li id="ca-history"><a href="/mwiki-mmtsb/index.php?title=cluster.pl&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
			</div>

		<div class="visualClear"></div>
		
	      <TABLE CLASS="footer" CELLSPACING=4 WIDTH=100%>
              <TR><TD CLASS="groups">
              <A HREF="http://brooks.chem.lsa.umich.edu">&nbsp;Brooks group</A><BR>
              <A HREF="http://feig.bch.msu.edu">&nbsp;Feig group</A>
	      </TD>
	      <TD CLASS="pageinfo">
	        <ul>

<!--
					<div id="footer" role="contentinfo">
						<div id="f-poweredbyico">
									<a href="//www.mediawiki.org/"><img src="/mwiki-mmtsb/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/mwiki-mmtsb/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /mwiki-mmtsb/resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>
							</div>
		</div>		-->
                </ul>
		</TD>
		</TR></TABLE>

		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"ready","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":2031});
}</script></body></html>
